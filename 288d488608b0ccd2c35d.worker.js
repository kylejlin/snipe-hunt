!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=4)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),i=r(n(2));function a(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.isSome())return o.default.none();t.push(r.value)}return o.default.some(t)}function u(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.isOk())return r;t.push(r.safeUnwrap())}return i.default.ok(t)}t.option={some:function(e){return o.default.some(e)},none:function(){return o.default.none()},all:a,fromVoidable:function(e){return void 0===e||null===e?o.default.none():o.default.some(e)}},t.optionDotAll=a,t.result={ok:function(e){return i.default.ok(e)},err:function(e){return i.default.err(e)},all:u},t.resultDotAll=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),i=r(n(3)),a=function(){function e(e,t){this.isNone_=e,this.value=t}return e.some=function(t){return new e(!1,t)},e.none=function(){return new e(!0,void 0)},e.prototype.match=function(e){return this.isNone()?e.none():e.some(this.value)},e.prototype.isNone=function(){return this.isNone_},e.prototype.isSome=function(){return!this.isNone()},e.prototype.map=function(t){var n=this;return this.match({none:function(){return n},some:function(n){return e.some(t(n))}})},e.prototype.ifSome=function(e){this.map(e)},e.prototype.ifNone=function(e){this.isNone()&&e()},e.prototype.unwrap=function(){return this.expect("Tried to call unwrap() on option.none()")},e.prototype.expect=function(e){return this.match({none:function(){throw"string"===typeof e?new i.default(e):e},some:function(e){return e}})},e.prototype.unwrapOr=function(e){return this.match({none:function(){return e},some:function(e){return e}})},e.prototype.unwrapOrElse=function(e){return this.match({none:function(){return e()},some:function(e){return e}})},e.prototype.and=function(t){return this.match({none:function(){return e.none()},some:function(){return t}})},e.prototype.andThen=function(t){return this.match({none:function(){return e.none()},some:t})},e.prototype.or=function(e){var t=this;return this.match({none:function(){return e},some:function(){return t}})},e.prototype.orElse=function(e){var t=this;return this.match({none:e,some:function(){return t}})},e.prototype.filter=function(t){var n=this;return this.andThen((function(r){return t(r)?n:e.none()}))},e.prototype.flatten=function(){return this.andThen((function(e){return e}))},e.prototype.array=function(){return this.match({none:function(){return[]},some:function(e){return[e]}})},e.prototype.xor=function(t){var n=this;return this.match({none:function(){return t},some:function(){return t.match({none:function(){return n},some:function(){return e.none()}})}})},e.prototype.transpose=function(){return this.match({none:function(){return o.default.ok(e.none())},some:function(t){return t.match({ok:function(t){return o.default.ok(e.some(t))},err:function(e){return o.default.err(e)}})}})},e.prototype.equalsSome=function(e){return this.match({none:function(){return!1},some:function(t){return t===e}})},e.prototype.someSatisfies=function(e){return this.match({none:function(){return!1},some:e})},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),i=r(n(3)),a=function(){function e(e,t){this.isErr_=e,this.value=t}return e.ok=function(t){return new e(!1,t)},e.err=function(t){return new e(!0,t)},e.prototype.match=function(e){return this.isErr_?e.err(this.value):e.ok(this.value)},e.prototype.ok=function(){return this.match({ok:function(e){return o.default.some(e)},err:function(){return o.default.none()}})},e.prototype.err=function(){return this.match({ok:function(){return o.default.none()},err:function(e){return o.default.some(e)}})},e.prototype.isOk=function(){return!this.isErr_},e.prototype.isErr=function(){return this.isErr_},e.prototype.map=function(t){var n=this;return this.match({ok:function(n){return e.ok(t(n))},err:function(){return n}})},e.prototype.mapErr=function(t){var n=this;return this.match({err:function(n){return e.err(t(n))},ok:function(){return n}})},e.prototype.ifOk=function(e){this.map(e)},e.prototype.ifErr=function(e){this.mapErr(e)},e.prototype.unwrap=function(){return this.expect("Tried to call unwrap() on result.err()")},e.prototype.safeUnwrap=function(){return this.value},e.prototype.safeUnwrapErr=function(){return this.value},e.prototype.unwrapErr=function(){return this.expectErr("Tried to call unwrapErr() on result.ok()")},e.prototype.unwrapOrThrowErr=function(){return this.match({ok:function(e){return e},err:function(e){throw e}})},e.prototype.unwrapErrOrThrowOk=function(){return this.match({ok:function(e){throw e},err:function(e){return e}})},e.prototype.expect=function(e){return this.match({ok:function(e){return e},err:function(){throw"string"===typeof e?new i.default(e):e}})},e.prototype.expectErr=function(e){return this.match({ok:function(){throw"string"===typeof e?new i.default(e):e},err:function(e){return e}})},e.prototype.unwrapOr=function(e){return this.match({ok:function(e){return e},err:function(){return e}})},e.prototype.unwrapOrElse=function(e){var t=this;return this.match({ok:function(e){return e},err:function(){return e(t.value)}})},e.prototype.and=function(e){var t=this;return this.match({ok:function(){return e},err:function(){return t}})},e.prototype.andThen=function(e){var t=this;return this.match({ok:e,err:function(){return t}})},e.prototype.or=function(e){var t=this;return this.match({ok:function(){return t},err:function(){return e}})},e.prototype.orElse=function(e){var t=this;return this.match({ok:function(){return t},err:e})},e.prototype.array=function(){return this.match({ok:function(e){return[e]},err:function(){return[]}})},e.prototype.transpose=function(){return this.match({ok:function(t){return t.match({some:function(t){return o.default.some(e.ok(t))},none:function(){return o.default.none()}})},err:function(t){return o.default.some(e.err(t))}})},e.prototype.okSatisfies=function(e){return this.ok().match({some:e,none:function(){return!1}})},e.prototype.errSatisfies=function(e){return this.err().match({some:e,none:function(){return!1}})},e.prototype.reverse=function(){return this.match({ok:function(t){return e.err(t)},err:function(t){return e.ok(t)}})},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="UnwrapError",n}return r(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";n.r(t);var r,o,i,a,u=n(0);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=p(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}!function(e){e[e.AlphaAnimals=0]="AlphaAnimals",e[e.BetaAnimals=1]="BetaAnimals",e[e.Snipes=2]="Snipes"}(r||(r={})),function(e){e[e.LeastBit=1]="LeastBit",e[e.LeastTwoBits=3]="LeastTwoBits",e[e.LeastThreeBits=7]="LeastThreeBits",e[e.LeastFiveBits=31]="LeastFiveBits",e[e.LeastSixBits=63]="LeastSixBits",e[e.LeastTenBits=1023]="LeastTenBits",e[e.LeastSixteenBits=65535]="LeastSixteenBits"}(o||(o={})),function(e){e[e.SnipeStep=1]="SnipeStep",e[e.Drop=2]="Drop",e[e.TwoAnimalSteps=3]="TwoAnimalSteps"}(i||(i={}));var d,h;!function(e){e.None="None",e.BestAction="BestAction",e.AllActions="AllActions"}(d||(d={})),function(e){e[e.AlphaReserve=0]="AlphaReserve",e[e.Row1=1]="Row1",e[e.Row2=2]="Row2",e[e.Row3=3]="Row3",e[e.Row4=4]="Row4",e[e.Row5=5]="Row5",e[e.Row6=6]="Row6",e[e.BetaReserve=7]="BetaReserve"}(h||(h={}));var v,A=[h.AlphaReserve,h.Row1,h.Row2,h.Row3,h.Row4,h.Row5,h.Row6,h.BetaReserve],S=[h.Row1,h.Row2,h.Row3,h.Row4,h.Row5,h.Row6];!function(e){e[e.Mouse1=0]="Mouse1",e[e.Ox1=1]="Ox1",e[e.Tiger1=2]="Tiger1",e[e.Rabbit1=3]="Rabbit1",e[e.Dragon1=4]="Dragon1",e[e.Snake1=5]="Snake1",e[e.Horse1=6]="Horse1",e[e.Ram1=7]="Ram1",e[e.Monkey1=8]="Monkey1",e[e.Rooster1=9]="Rooster1",e[e.Dog1=10]="Dog1",e[e.Boar1=11]="Boar1",e[e.Fish1=12]="Fish1",e[e.Elephant1=13]="Elephant1",e[e.Squid1=14]="Squid1",e[e.Frog1=15]="Frog1",e[e.Mouse2=16]="Mouse2",e[e.Ox2=17]="Ox2",e[e.Tiger2=18]="Tiger2",e[e.Rabbit2=19]="Rabbit2",e[e.Dragon2=20]="Dragon2",e[e.Snake2=21]="Snake2",e[e.Horse2=22]="Horse2",e[e.Ram2=23]="Ram2",e[e.Monkey2=24]="Monkey2",e[e.Rooster2=25]="Rooster2",e[e.Dog2=26]="Dog2",e[e.Boar2=27]="Boar2",e[e.Fish2=28]="Fish2",e[e.Elephant2=29]="Elephant2",e[e.Squid2=30]="Squid2",e[e.Frog2=31]="Frog2",e[e.AlphaSnipe=32]="AlphaSnipe",e[e.BetaSnipe=33]="BetaSnipe"}(v||(v={}));var y,B=[v.Mouse1,v.Ox1,v.Tiger1,v.Rabbit1,v.Dragon1,v.Snake1,v.Horse1,v.Ram1,v.Monkey1,v.Rooster1,v.Dog1,v.Boar1,v.Fish1,v.Elephant1,v.Squid1,v.Frog1,v.Mouse2,v.Ox2,v.Tiger2,v.Rabbit2,v.Dragon2,v.Snake2,v.Horse2,v.Ram2,v.Monkey2,v.Rooster2,v.Dog2,v.Boar2,v.Fish2,v.Elephant2,v.Squid2,v.Frog2];!function(e){e[e.Alpha=0]="Alpha",e[e.Beta=1]="Beta"}(y||(y={}));var g,R,b,w,T,E,F,C,_=(f(a={},y.Alpha,[h.Row1,h.Row2,h.Row3,h.Row4]),f(a,y.Beta,[h.Row3,h.Row4,h.Row5,h.Row6]),a);!function(e){e[e.SnipeStep=0]="SnipeStep",e[e.Drop=1]="Drop",e[e.TwoAnimalSteps=2]="TwoAnimalSteps"}(g||(g={})),function(e){e[e.SnipeAlreadyCaptured=0]="SnipeAlreadyCaptured",e[e.AlreadyMovedAnimal=1]="AlreadyMovedAnimal",e[e.StepDestinationOutOfRange=2]="StepDestinationOutOfRange",e[e.CannotEmptyRowWithoutImmediatelyWinning=3]="CannotEmptyRowWithoutImmediatelyWinning",e[e.DroppedAnimalNotInReserve=4]="DroppedAnimalNotInReserve",e[e.CannotEmptyReserve=5]="CannotEmptyReserve",e[e.CannotDropRetreaterOnEnemysBackTwoRows=6]="CannotDropRetreaterOnEnemysBackTwoRows",e[e.MovedCardInReserve=7]="MovedCardInReserve",e[e.NotYourAnimal=8]="NotYourAnimal",e[e.CannotMoveSameAnimalTwice=9]="CannotMoveSameAnimalTwice",e[e.CannotCaptureOwnSnipeWithoutAlsoCapturingOpponents=10]="CannotCaptureOwnSnipeWithoutAlsoCapturingOpponents",e[e.NothingToUndo=11]="NothingToUndo"}(R||(R={})),function(e){e[e.Fire=0]="Fire",e[e.Water=1]="Water",e[e.Earth=2]="Earth",e[e.Air=3]="Air"}(b||(b={})),function(e){e[e.F1=1]="F1",e[e.F2=2]="F2",e[e.F3=4]="F3",e[e.W1=8]="W1",e[e.W2=16]="W2",e[e.W3=32]="W3",e[e.E1=64]="E1",e[e.E2=128]="E2",e[e.E3=256]="E3",e[e.A1=512]="A1",e[e.A2=1024]="A2",e[e.A3=2048]="A3"}(w||(w={})),function(e){e[e.Fire=0]="Fire",e[e.Water=3]="Water",e[e.Earth=6]="Earth",e[e.Air=9]="Air",e[e.None=12]="None"}(T||(T={})),function(e){e[e.UpdateGameStateRequest=0]="UpdateGameStateRequest",e[e.PauseAnalyzerRequest=1]="PauseAnalyzerRequest",e[e.ResumeAnalyzerRequest=2]="ResumeAnalyzerRequest",e[e.LogNotification=3]="LogNotification",e[e.UpdateSnapshotNotification=4]="UpdateSnapshotNotification",e[e.PauseAnalyzerResponse=5]="PauseAnalyzerResponse",e[e.StopTimeChangeNotification=6]="StopTimeChangeNotification"}(E||(E={}));var M=(f(F={},v.Mouse1,{elements:u.option.some({double:b.Fire,single:b.Earth}),elementCounts:w.F2|w.E1,tripletShifts:[T.Fire,T.Earth],canRetreat:!0}),f(F,v.Ox1,{elements:u.option.some({double:b.Earth,single:b.Water}),elementCounts:w.E2|w.W1,tripletShifts:[T.Earth,T.Water],canRetreat:!1}),f(F,v.Tiger1,{elements:u.option.some({double:b.Fire,single:b.Fire}),elementCounts:w.F3,tripletShifts:[T.Fire,T.None],canRetreat:!1}),f(F,v.Rabbit1,{elements:u.option.some({double:b.Air,single:b.Water}),elementCounts:w.A2|w.W1,tripletShifts:[T.Air,T.Water],canRetreat:!0}),f(F,v.Dragon1,{elements:u.option.some({double:b.Air,single:b.Air}),elementCounts:w.A3,tripletShifts:[T.Air,T.None],canRetreat:!1}),f(F,v.Snake1,{elements:u.option.some({double:b.Water,single:b.Earth}),elementCounts:w.W2|w.E1,tripletShifts:[T.Water,T.Earth],canRetreat:!0}),f(F,v.Horse1,{elements:u.option.some({double:b.Fire,single:b.Air}),elementCounts:w.F2|w.A1,tripletShifts:[T.Fire,T.Air],canRetreat:!1}),f(F,v.Ram1,{elements:u.option.some({double:b.Earth,single:b.Air}),elementCounts:w.E2|w.A1,tripletShifts:[T.Earth,T.Air],canRetreat:!0}),f(F,v.Monkey1,{elements:u.option.some({double:b.Air,single:b.Earth}),elementCounts:w.A2|w.E1,tripletShifts:[T.Air,T.Earth],canRetreat:!1}),f(F,v.Rooster1,{elements:u.option.some({double:b.Air,single:b.Fire}),elementCounts:w.A2|w.F1,tripletShifts:[T.Air,T.Fire],canRetreat:!1}),f(F,v.Dog1,{elements:u.option.some({double:b.Fire,single:b.Water}),elementCounts:w.F2|w.W1,tripletShifts:[T.Fire,T.Water],canRetreat:!1}),f(F,v.Boar1,{elements:u.option.some({double:b.Earth,single:b.Fire}),elementCounts:w.E2|w.F1,tripletShifts:[T.Earth,T.Fire],canRetreat:!0}),f(F,v.Fish1,{elements:u.option.some({double:b.Water,single:b.Water}),elementCounts:w.W3,tripletShifts:[T.Water,T.None],canRetreat:!1}),f(F,v.Elephant1,{elements:u.option.some({double:b.Earth,single:b.Earth}),elementCounts:w.E3,tripletShifts:[T.Earth,T.None],canRetreat:!1}),f(F,v.Squid1,{elements:u.option.some({double:b.Water,single:b.Fire}),elementCounts:w.W2|w.F1,tripletShifts:[T.Water,T.Fire],canRetreat:!0}),f(F,v.Frog1,{elements:u.option.some({double:b.Water,single:b.Air}),elementCounts:w.W2|w.A1,tripletShifts:[T.Water,T.Air],canRetreat:!1}),f(F,v.Mouse2,{elements:u.option.some({double:b.Fire,single:b.Earth}),elementCounts:w.F2|w.E1,tripletShifts:[T.Fire,T.Earth],canRetreat:!0}),f(F,v.Ox2,{elements:u.option.some({double:b.Earth,single:b.Water}),elementCounts:w.E2|w.W1,tripletShifts:[T.Earth,T.Water],canRetreat:!1}),f(F,v.Tiger2,{elements:u.option.some({double:b.Fire,single:b.Fire}),elementCounts:w.F3,tripletShifts:[T.Fire,T.None],canRetreat:!1}),f(F,v.Rabbit2,{elements:u.option.some({double:b.Air,single:b.Water}),elementCounts:w.A2|w.W1,tripletShifts:[T.Air,T.Water],canRetreat:!0}),f(F,v.Dragon2,{elements:u.option.some({double:b.Air,single:b.Air}),elementCounts:w.A3,tripletShifts:[T.Air,T.None],canRetreat:!1}),f(F,v.Snake2,{elements:u.option.some({double:b.Water,single:b.Earth}),elementCounts:w.W2|w.E1,tripletShifts:[T.Water,T.Earth],canRetreat:!0}),f(F,v.Horse2,{elements:u.option.some({double:b.Fire,single:b.Air}),elementCounts:w.F2|w.A1,tripletShifts:[T.Fire,T.Air],canRetreat:!1}),f(F,v.Ram2,{elements:u.option.some({double:b.Earth,single:b.Air}),elementCounts:w.E2|w.A1,tripletShifts:[T.Earth,T.Air],canRetreat:!0}),f(F,v.Monkey2,{elements:u.option.some({double:b.Air,single:b.Earth}),elementCounts:w.A2|w.E1,tripletShifts:[T.Air,T.Earth],canRetreat:!1}),f(F,v.Rooster2,{elements:u.option.some({double:b.Air,single:b.Fire}),elementCounts:w.A2|w.F1,tripletShifts:[T.Air,T.Fire],canRetreat:!1}),f(F,v.Dog2,{elements:u.option.some({double:b.Fire,single:b.Water}),elementCounts:w.F2|w.W1,tripletShifts:[T.Fire,T.Water],canRetreat:!1}),f(F,v.Boar2,{elements:u.option.some({double:b.Earth,single:b.Fire}),elementCounts:w.E2|w.F1,tripletShifts:[T.Earth,T.Fire],canRetreat:!0}),f(F,v.Fish2,{elements:u.option.some({double:b.Water,single:b.Water}),elementCounts:w.W3,tripletShifts:[T.Water,T.None],canRetreat:!1}),f(F,v.Elephant2,{elements:u.option.some({double:b.Earth,single:b.Earth}),elementCounts:w.E3,tripletShifts:[T.Earth,T.None],canRetreat:!1}),f(F,v.Squid2,{elements:u.option.some({double:b.Water,single:b.Fire}),elementCounts:w.W2|w.F1,tripletShifts:[T.Water,T.Fire],canRetreat:!0}),f(F,v.Frog2,{elements:u.option.some({double:b.Water,single:b.Air}),elementCounts:w.W2|w.A1,tripletShifts:[T.Water,T.Air],canRetreat:!1}),f(F,v.AlphaSnipe,{elements:u.option.none(),elementCounts:0,tripletShifts:[T.None,T.None],canRetreat:!0}),f(F,v.BetaSnipe,{elements:u.option.none(),elementCounts:0,tripletShifts:[T.None,T.None],canRetreat:!0}),F);f(C={},v.Mouse1,"\ud83d\udc00"),f(C,v.Mouse2,"\ud83d\udc00"),f(C,v.Ox1,"\ud83d\udc2e"),f(C,v.Ox2,"\ud83d\udc2e"),f(C,v.Tiger1,"\ud83d\udc2f"),f(C,v.Tiger2,"\ud83d\udc2f"),f(C,v.Rabbit1,"\ud83d\udc07"),f(C,v.Rabbit2,"\ud83d\udc07"),f(C,v.Dragon1,"\ud83d\udc09 "),f(C,v.Dragon2,"\ud83d\udc09 "),f(C,v.Snake1,"\ud83d\udc0d"),f(C,v.Snake2,"\ud83d\udc0d"),f(C,v.Horse1,"\ud83d\udc34"),f(C,v.Horse2,"\ud83d\udc34"),f(C,v.Ram1,"\ud83d\udc0f"),f(C,v.Ram2,"\ud83d\udc0f"),f(C,v.Monkey1,"\ud83d\udc35"),f(C,v.Monkey2,"\ud83d\udc35"),f(C,v.Rooster1,"\ud83d\udc13"),f(C,v.Rooster2,"\ud83d\udc13"),f(C,v.Dog1,"\ud83d\udc36"),f(C,v.Dog2,"\ud83d\udc36"),f(C,v.Boar1,"\ud83d\udc17"),f(C,v.Boar2,"\ud83d\udc17"),f(C,v.Fish1,"\ud83d\udc1f"),f(C,v.Fish2,"\ud83d\udc1f"),f(C,v.Elephant1,"\ud83d\udc18"),f(C,v.Elephant2,"\ud83d\udc18"),f(C,v.Squid1,"\ud83e\udd91"),f(C,v.Squid2,"\ud83e\udd91"),f(C,v.Frog1,"\ud83d\udc38"),f(C,v.Frog2,"\ud83d\udc38"),f(C,v.AlphaSnipe,"\u03b1"),f(C,v.BetaSnipe,"\u03b2");function L(e,t){var n=t-e;return e+Math.floor(n*Math.random())}function x(e){return e===h.AlphaReserve||e===h.BetaReserve}function N(e){return M[e].canRetreat}function k(e){switch(e){case y.Alpha:return y.Beta;case y.Beta:return y.Alpha}}function W(e){switch(e){case y.Alpha:return v.AlphaSnipe;case y.Beta:return v.BetaSnipe}}function q(e,t){return e+(t===y.Alpha?1:-1)}function O(e,t){return e+(t===y.Alpha?-1:1)}function D(e){return!(e===h.AlphaReserve||e===h.BetaReserve)}function P(e){switch(e&o.LeastThreeBits){case i.SnipeStep:var t=e>>>3&o.LeastThreeBits;return{plyType:g.SnipeStep,destination:t};case i.Drop:var n=e>>>3&o.LeastFiveBits,r=e>>>8&o.LeastThreeBits;return{plyType:g.Drop,dropped:n,destination:r};case i.TwoAnimalSteps:var a=e>>>3&o.LeastFiveBits,u=e>>>8&o.LeastThreeBits,s=e>>>11&o.LeastFiveBits,p=e>>>16&o.LeastThreeBits;return{plyType:g.TwoAnimalSteps,first:{moved:a,destination:u},second:{moved:s,destination:p}}}}function I(e){var t=e;return{getInitialState:function(){return{stateVersion:t.stateVersion,initialBoard:t.initialBoard,currentBoard:t.initialBoard,turn:y.Beta,plies:[],pendingAnimalStep:0}},getBoard:function(){var e,n,o=(f(e={},h.AlphaReserve,[]),f(e,h.Row1,[]),f(e,h.Row2,[]),f(e,h.Row3,[]),f(e,h.Row4,[]),f(e,h.Row5,[]),f(e,h.Row6,[]),f(e,h.BetaReserve,[]),e),i=c(A);try{var a=function(){var e=n.value,i=o[e],a=t.currentBoard[3*e+r.AlphaAnimals],u=t.currentBoard[3*e+r.BetaAnimals];B.forEach((function(e){0!==(1<<e&a)&&i.push({cardType:e,allegiance:y.Alpha}),0!==(1<<e&u)&&i.push({cardType:e,allegiance:y.Beta})}));var s=t.currentBoard[3*e+r.Snipes];0!==(1<<y.Alpha&s)&&i.push({cardType:v.AlphaSnipe,allegiance:y.Alpha}),0!==(1<<y.Beta&s)&&i.push({cardType:v.BetaSnipe,allegiance:y.Beta})};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return o},getPlies:function(){return t.plies.map(P)},getPendingAnimalStep:function(){var e=t.pendingAnimalStep;if(0===e)return u.option.none();var n=e>>>3&o.LeastFiveBits,r=e>>>8&o.LeastThreeBits;return u.option.some({moved:n,destination:r})},isGameOver:function(){return n().isSome()},getWinner:n,getTurn:function(){return t.turn},getCardLocation:w,tryUndoSubPly:function(){if(0===t.plies.length&&0===t.pendingAnimalStep)return u.result.err(R.NothingToUndo);if(0!==t.pendingAnimalStep){var e=j(t);e.pendingAnimalStep=0;var n={moved:t.pendingAnimalStep>>>3&o.LeastFiveBits,destination:t.pendingAnimalStep>>>8&o.LeastThreeBits};return u.result.ok({newState:F(e),undone:n})}var r,i=j(t),a=P(i.plies.pop());if(a.plyType===g.TwoAnimalSteps){var s=a.first.destination<<8|a.first.moved<<3|1;i.pendingAnimalStep=s,r=a.second}else r=a;return u.result.ok({newState:F(i),undone:r})},tryPerform:function(e){return function(e){if(d())return u.option.some(R.SnipeAlreadyCaptured);if(!("plyType"in e)){var n=E(e.moved);if(x(n))return u.option.some(R.MovedCardInReserve);var i=t.currentBoard[3*n+(t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals)];if(!(1<<e.moved&i))return u.option.some(R.NotYourAnimal);if(!C(e.moved,t.turn,e.destination))return u.option.some(R.StepDestinationOutOfRange);if(t.pendingAnimalStep&&(t.pendingAnimalStep>>>3&o.LeastFiveBits)===e.moved)return u.option.some(R.CannotMoveSameAnimalTwice);var a=b(t.currentBoard[3*e.destination+r.AlphaAnimals]|t.currentBoard[3*e.destination+r.BetaAnimals],e.moved),s=t.currentBoard[3*e.destination+r.Snipes],p=t.turn===y.Alpha?1<<y.Beta:1<<y.Alpha,l=s&p,c=t.currentBoard[3*n+r.AlphaAnimals]|t.currentBoard[3*n+r.BetaAnimals],f=t.currentBoard[3*n+r.Snipes],m=c&~(1<<e.moved)|f,v=t.turn===y.Alpha?1<<y.Alpha:1<<y.Beta,A=s&v;return m?a&&A&&!l?u.option.some(R.CannotCaptureOwnSnipeWithoutAlsoCapturingOpponents):u.option.none():a&&l?u.option.none():u.option.some(R.CannotEmptyRowWithoutImmediatelyWinning)}switch(e.plyType){case g.SnipeStep:if(t.pendingAnimalStep)return u.option.some(R.AlreadyMovedAnimal);var S=W(t.turn);if(!C(S,t.turn,e.destination))return u.option.some(R.StepDestinationOutOfRange);var B=T(S),w=t.currentBoard[3*B+r.AlphaAnimals]|t.currentBoard[3*B+r.BetaAnimals],F=t.currentBoard[3*B+r.Snipes],M=t.turn===y.Alpha?1<<y.Beta:1<<y.Alpha;return w|F&M?u.option.none():u.option.some(R.CannotEmptyRowWithoutImmediatelyWinning);case g.Drop:if(t.pendingAnimalStep)return u.option.some(R.AlreadyMovedAnimal);var L=t.currentBoard[3*(t.turn===y.Alpha?h.AlphaReserve:h.BetaReserve)+(t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals)];return 1<<e.dropped&L?L&~(1<<e.dropped)?N(e.dropped)&&!_[t.turn].includes(e.destination)?u.option.some(R.CannotDropRetreaterOnEnemysBackTwoRows):u.option.none():u.option.some(R.CannotEmptyReserve):u.option.some(R.DroppedAnimalNotInReserve)}}(e).match({some:u.result.err,none:function(){return u.result.ok(L(e))}})},serialize:U,toNodeKey:function(){var e=t.currentBoard;return String.fromCharCode(e[0]&o.LeastSixteenBits,e[0]>>>16,e[1]&o.LeastSixteenBits,e[1]>>>16,e[3]&o.LeastSixteenBits,e[3]>>>16,e[4]&o.LeastSixteenBits,e[4]>>>16,e[6]&o.LeastSixteenBits,e[6]>>>16,e[7]&o.LeastSixteenBits,e[7]>>>16,e[9]&o.LeastSixteenBits,e[9]>>>16,e[10]&o.LeastSixteenBits,e[10]>>>16,e[12]&o.LeastSixteenBits,e[12]>>>16,e[13]&o.LeastSixteenBits,e[13]>>>16,e[15]&o.LeastSixteenBits,e[15]>>>16,e[16]&o.LeastSixteenBits,e[16]>>>16,e[18]&o.LeastSixteenBits,e[18]>>>16,e[19]&o.LeastSixteenBits,e[19]>>>16,e[21]&o.LeastSixteenBits,e[21]>>>16,e[22]&o.LeastSixteenBits,e[22]>>>16,e[2]|e[5]<<2|e[8]<<4|e[11]<<6|e[14]<<8|e[17]<<10|e[20]<<12|e[23]<<14,t.turn<<1|t.pendingAnimalStep&o.LeastBit)},setState:function(e){t=e},getLegalAtomics:p,forcePerform:L};function n(){return a()?u.option.some(y.Beta):s()?u.option.some(y.Alpha):0===p().length?u.option.some(k(t.turn)):u.option.none()}function a(){var e=t.currentBoard[3*h.BetaReserve+r.Snipes];return 0!==(1<<y.Alpha&e)}function s(){var e=t.currentBoard[3*h.AlphaReserve+r.Snipes];return 0!==(1<<y.Beta&e)}function p(){if(d())return[];var e=[];if(0===t.pendingAnimalStep){var n=T(W(t.turn)),i=t.currentBoard[3*n+r.AlphaAnimals]|t.currentBoard[3*n+r.BetaAnimals];if(t.currentBoard[3*n+r.Snipes]&1<<k(t.turn)|i){var a=q(n,t.turn);D(a)&&e.push({plyType:g.SnipeStep,destination:a});var u=O(n,t.turn);D(u)&&e.push({plyType:g.SnipeStep,destination:u})}var s=t.turn===y.Alpha?h.AlphaReserve:h.BetaReserve,p=t.currentBoard[3*s+(t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals)];if(m(p)>1){var l,f=c(B);try{for(f.s();!(l=f.n()).done;){var v=l.value;if(1<<v&p){var A,R=c(N(v)?_[t.turn]:S);try{for(R.s();!(A=R.n()).done;){var w=A.value;e.push({plyType:g.Drop,dropped:v,destination:w})}}catch(Q){R.e(Q)}finally{R.f()}}}}catch(Q){f.e(Q)}finally{f.f()}}}var E,F=c(S);try{for(F.s();!(E=F.n()).done;){var C=E.value,M=t.currentBoard[3*C+(t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals)];if(M){var L,x=t.currentBoard[3*C+r.AlphaAnimals]|t.currentBoard[3*C+r.BetaAnimals],P=t.currentBoard[3*C+r.Snipes],I=m(x)>>>1|P,j=t.turn===y.Alpha?1<<y.Beta:1<<y.Alpha,U=c(B);try{for(U.s();!(L=U.n()).done;){var V=L.value;if((!t.pendingAnimalStep||(t.pendingAnimalStep>>>3&o.LeastFiveBits)!==V)&&1<<V&M)if(I){var z=t.turn===y.Alpha?1<<y.Alpha:1<<y.Beta,H=q(C,t.turn),G=t.currentBoard[3*H+r.Snipes];if(!D(H)||G&z&&!(G&j)&&b(t.currentBoard[3*H+r.AlphaAnimals]|t.currentBoard[3*H+r.BetaAnimals],V)||e.push({moved:V,destination:H}),N(V)){var Y=O(C,t.turn),J=t.currentBoard[3*Y+r.Snipes];!D(Y)||J&z&&!(J&j)&&b(t.currentBoard[3*Y+r.AlphaAnimals]|t.currentBoard[3*Y+r.BetaAnimals],V)||e.push({moved:V,destination:Y})}}else{var K=q(C,t.turn);if(D(K)&&P&j&&b(t.currentBoard[3*K+r.AlphaAnimals]|t.currentBoard[3*K+r.BetaAnimals],V)&&e.push({moved:V,destination:K}),N(V)){var $=O(C,t.turn);D($)&&P&j&&b(t.currentBoard[3*$+r.AlphaAnimals]|t.currentBoard[3*$+r.BetaAnimals],V)&&e.push({moved:V,destination:$})}}}}catch(Q){U.e(Q)}finally{U.f()}}}}catch(Q){F.e(Q)}finally{F.f()}return e}function d(){return a()||s()}function b(e,t){var n,r=M[t].elementCounts,o=c(B);try{for(o.s();!(n=o.n()).done;){var i=n.value;1<<i&e&&(r|=M[i].elementCounts)}}catch(p){o.e(p)}finally{o.f()}var a=l(M[t].tripletShifts,2),u=a[0],s=a[1];return 7===(r>>>u&7)||7===(r>>>s&7)}function w(e){switch(e){case v.AlphaSnipe:case v.BetaSnipe:return T(e);default:return E(e)}}function T(e){var n,o=e===v.AlphaSnipe?1<<y.Alpha:1<<y.Beta,i=c(A);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(0!==(t.currentBoard[3*a+r.Snipes]&o))return a}}catch(u){i.e(u)}finally{i.f()}throw new Error("Impossible: "+v[e]+" cannot be found in "+U())}function E(e){var n,o=1<<e,i=c(A);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(0!==((t.currentBoard[3*a+r.AlphaAnimals]|t.currentBoard[3*a+r.BetaAnimals])&o))return a}}catch(u){i.e(u)}finally{i.f()}throw new Error("Impossible: "+v[e]+" cannot be found in "+U())}function F(e){var t=e,n=I(t);t.currentBoard=new Int32Array(t.initialBoard);var r=t.plies.map(P),i=t.pendingAnimalStep;if(t.plies=[],t.pendingAnimalStep=0,t.turn=y.Beta,r.forEach((function(e){e.plyType===g.TwoAnimalSteps?(n.setState(t),t=n.forcePerform(e.first),n.setState(t),t=n.forcePerform(e.second)):(n.setState(t),t=n.forcePerform(e))})),i){n.setState(t);var a={moved:i>>>3&o.LeastFiveBits,destination:i>>>8&o.LeastThreeBits};t=n.forcePerform(a)}return t}function C(e,t,n){var r=w(e);return!x(r)&&(q(r,t)===n||N(e)&&O(r,t)===n)}function L(e){if(!("plyType"in e))return function(e){var n=w(e.moved),a=t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals,u=t.currentBoard[3*e.destination+r.AlphaAnimals]|t.currentBoard[3*e.destination+r.BetaAnimals],s=j(t),p=1<<e.moved,l=~p;if(s.currentBoard[3*n+a]&=l,b(u,e.moved)){var c=t.turn===y.Alpha?h.AlphaReserve:h.BetaReserve,f=t.currentBoard[3*e.destination+r.Snipes],m=t.turn===y.Alpha?r.BetaAnimals:r.AlphaAnimals;s.currentBoard[3*c+a]|=u,s.currentBoard[3*c+r.Snipes]|=f,s.currentBoard[3*e.destination+a]=p,s.currentBoard[3*e.destination+m]=0,s.currentBoard[3*e.destination+r.Snipes]=0}else s.currentBoard[3*e.destination+a]|=p;if(s.pendingAnimalStep){var d=e.destination<<16|e.moved<<11|s.pendingAnimalStep;s.plies.push(d&~o.LeastThreeBits|i.TwoAnimalSteps),s.pendingAnimalStep=0,s.turn=k(s.turn)}else s.pendingAnimalStep=e.destination<<8|e.moved<<3|1;return s}(e);switch(e.plyType){case g.SnipeStep:return function(e){var n=w(W(t.turn)),o=1<<t.turn,a=~o,u=j(t);return u.currentBoard[3*n+r.Snipes]&=a,u.currentBoard[3*e.destination+r.Snipes]|=o,u.plies.push(e.destination<<3|i.SnipeStep),u.turn=k(u.turn),u}(e);case g.Drop:return function(e){var n=t.turn===y.Alpha?h.AlphaReserve:h.BetaReserve,o=t.turn===y.Alpha?r.AlphaAnimals:r.BetaAnimals,a=1<<e.dropped,u=~a,s=j(t);return s.currentBoard[3*n+o]&=u,s.currentBoard[3*e.destination+o]|=a,s.plies.push(e.destination<<8|e.dropped<<3|i.Drop),s.turn=k(s.turn),s}(e)}}function j(e){return{stateVersion:e.stateVersion,initialBoard:new Int32Array(e.initialBoard),currentBoard:new Int32Array(e.currentBoard),turn:e.turn,plies:e.plies.slice(),pendingAnimalStep:e.pendingAnimalStep}}function U(){return JSON.stringify(t,(function(e,t){return t instanceof Int32Array?Array.from(t):t}))}}var j,U,V=Math.sqrt(2);function z(e,t,n){return I(e).isGameOver()?u.option.none():u.option.some(function(e,t,n){var r=new Int32Array(n),i=0;!function(){if(0!==i)throw new Error("Cannot writeRootState() if heap is not empty.");var n=e.currentBoard,a=e.pendingAnimalStep;r[0]=n[0],r[1]=n[1],r[2]=n[3],r[3]=n[4],r[4]=n[6],r[5]=n[7],r[6]=n[9],r[7]=n[10],r[8]=n[12],r[9]=n[13],r[10]=n[15],r[11]=n[16],r[12]=n[18],r[13]=n[19],r[14]=n[21],r[15]=n[22],r[16]=(0===a?32:a>>>3&o.LeastFiveBits)<<26|t<<16|n[23]<<14|n[20]<<12|n[17]<<10|n[14]<<8|n[11]<<6|n[8]<<4|n[5]<<2|n[2],r[j.ParentIndex]=-1,r[j.Atomic]=-1,r[j.Value]=0,r[j.Rollouts]=0,r[j.ChildListStartIndex]=-1,i=22}();var a=H({heapBuffer:r.buffer,mallocIndex:i});return a.performRollout(),a.performRollout(),a}(e,t,n))}function H(e){var t=new Int32Array(e.heapBuffer),n=new Int32Array(17),r=e.mallocIndex;return{performRollout:function(){var e=0;for(;!i(e);)e=a(e);var n=e;if(0===s(n)&&0!==n)c(n);else{var r=w(t,n);~r?(k(n,r),P(n,r)):function(e){for(var n=[],r=f(t.subarray(e,e+17)),o=r.length,i=0;i<o;i++){var a=r[i],u=E(22);n.push(u),F(e,a,u)}var s=n.length,p=E(1+s);t[e+j.ChildListStartIndex]=p,t[p]=s;for(var l=0;l<s;l++)t[p+1+l]=n[l];s&&c(n[0])}(n)}},getRootPointer:z,getNodeSummary:H,getChildPointersFromBestToWorst:function(e){for(var n=e,r=t[n+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&o.LeastTenBits,i=1022===r||1023===r?-1:1&r,a=t[n+j.ChildListStartIndex],u=t[a],s=[],p=0;p<u;p++){var l=t[a+1+p],c=T(l),f=void 0;if(-1!==c&&-1!==i)f=c===i?1/0:-1/0;else if(-1!==c){var m=t[l+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&o.LeastTenBits;f=m===r?1/0:-1/0}else{var d=t[l+j.Rollouts];f=d}s.push({index:l,score:f})}return s.sort((function(e,t){return t.score-e.score})).map((function(e){return e.index}))},getSnapshot:function(){var e=H(z()),n=function(){var e=function(){for(var e=t[0+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&1,n=1&~e,r=t[0+j.ChildListStartIndex],o=t[r],i=-1,a=0;a<o;a++){var u=t[r+1+a];if(-1!==i){var s=T(u);if(s===e)return u;s!==n&&(t[u+j.Rollouts]>t[i+j.Rollouts]||T(i)===n)&&(i=u)}else i=u}if(-1===i)throw new Error("Impossible: Root node has no children.");return i}();return{pointer:e,atomic:u.option.some(C(t[e+j.Atomic])),value:t[e+j.Value],rollouts:t[e+j.Rollouts]}}();return{currentStateValue:e.value,currentStateRollouts:e.rollouts,bestAtomic:n.atomic.expect("Impossible: Child node does not have atomic."),bestAtomicValue:n.value,bestAtomicRollouts:n.rollouts}},getInternalData:function(){return{heapBuffer:t.buffer,mallocIndex:r}}};function i(e){var n=t[e+j.ChildListStartIndex];return 0===(0|t[n])}function a(e){var n=t[e+j.ChildListStartIndex],r=t[n],o=s(e),i=t[e+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16,a=1&i,u=1&~i,l=p(n,0),c=x(l,o);if(T(l)===a)return l;T(l)===u&&(c=-1/0);for(var f=1;f<r;f++){var m=p(n,f),d=T(m);if(d===a)return m;if(d!==u){var h=x(m,o);h>c&&(l=m,c=h)}}return l}function s(e){return t[e+j.Rollouts]}function p(e,n){return t[e+1+n]}function c(e){var r=w(t,e);~r&&P(e,r),k(e,~r?r:function(e){!function(e){n.set(t.subarray(e,e+17))}(e);var r=f(n);for(;r.length>0;){b(r[L(0,r.length)],n),r=f(n)}return w(n,0)}(e))}function f(e){var t=e[j.SnipeSetsTurnNumberAndMovedAnimal];if(2&t|t>>>14&1)return[];var n=[],r=t>>>16&1,i=1^r,a=_[r];if(32===d(e)){v(t,r)&&console.log("etc",t);var u=h(t,r);if(D(u))if(t>>>(u<<1)&1<<i|(e[u<<1|r]|e[u<<1|i])){var s=q(u,r);D(s)&&n.push({plyType:g.SnipeStep,destination:s,qp_atomicType:U.SnipeStep,qp_activePlayer:r,qp_snipeLocation:u});var p=O(u,r);D(p)&&n.push({plyType:g.SnipeStep,destination:p,qp_atomicType:U.SnipeStep,qp_activePlayer:r,qp_snipeLocation:u})}var l=A(r,e);if(m(l)>1)for(var c=0;c<=31;c++)if(1<<c&l)for(var f=N(c)?a:S,y=f.length,B=0;B<y;B++)n.push({plyType:g.Drop,dropped:c,destination:f[B],qp_atomicType:U.Drop,qp_activePlayer:r})}for(var b=1;b<=6;b++){var w=b<<1|r,T=e[w];if(0!==T)for(var E=T|e[(b<<1)+i],F=t>>>(b<<1)&o.LeastTwoBits||m(E)>1,C=t>>>26,M=q(b,r),L=0!==M&&7!==M,x=!L<<1,k=t>>>(M<<1),W=(k&1<<r)>>>x,P=(k&1<<i)>>>x,I=O(b,r),V=0!==I&&7!==I,z=!V<<1,H=t>>>(I<<1),G=(H&1<<r)>>>z,Y=(H&1<<i)>>>z,J=0;J<=31;J++)if(C!==J&&1<<J&T){var K=R(M,J,e),$=N(J),Q=$&&R(I,J,e);F?(!L||W&&!P&&K||n.push({moved:J,destination:M,qp_atomicType:U.AnimalStep,qp_startIndex:w,qp_activePlayer:r,qp_inactivePlayer:i,qp_doesStepActivateTriplet:K}),$&&(!V||G&&!Y&&Q||n.push({moved:J,destination:I,qp_atomicType:U.AnimalStep,qp_startIndex:w,qp_activePlayer:r,qp_inactivePlayer:i,qp_doesStepActivateTriplet:Q}))):(L&&P&&K&&n.push({moved:J,destination:M,qp_atomicType:U.AnimalStep,qp_startIndex:w,qp_activePlayer:r,qp_inactivePlayer:i,qp_doesStepActivateTriplet:K}),Q&&V&&Y&&n.push({moved:J,destination:I,qp_atomicType:U.AnimalStep,qp_startIndex:w,qp_activePlayer:r,qp_inactivePlayer:i,qp_doesStepActivateTriplet:Q}))}}return n}function d(e){return e[j.SnipeSetsTurnNumberAndMovedAnimal]>>>26}function h(e,t){for(var n=1<<t,r=0;r<=14;r+=2)if(e>>>r&n)return r>>>1;throw new Error("Impossible: "+y[t]+" snipe cannot be found.")}function v(e,t){for(var n=1<<t,r=0;r<=14;r+=2)if(e>>>r&n)return!1;return!0}function A(e,t){return t[B(e)]}function B(e){return e===y.Alpha?0:15}function R(e,t,n){for(var r=n[e<<1]|n[1+(e<<1)],o=M[t].elementCounts,i=0;i<=31;i++)1<<i&r&&(o|=M[i].elementCounts);var a=l(M[t].tripletShifts,2),u=a[0],s=a[1];return 7===(o>>>u&7)||7===(o>>>s&7)}function b(e,t){return e.qp_atomicType===U.SnipeStep?function(e,t){var n=t[j.SnipeSetsTurnNumberAndMovedAnimal],r=1<<e.qp_activePlayer;t[j.SnipeSetsTurnNumberAndMovedAnimal]&=~(r<<(e.qp_snipeLocation<<1)),t[j.SnipeSetsTurnNumberAndMovedAnimal]|=r<<(e.destination<<1);var i=t[j.SnipeSetsTurnNumberAndMovedAnimal];(v(i,0)||v(i,1))&&console.log("before",n,"after",i,"was already broken",v(n,0)||v(n,1),"atomic",e);var a=t[j.SnipeSetsTurnNumberAndMovedAnimal],u=a>>>16&o.LeastTenBits;t[j.SnipeSetsTurnNumberAndMovedAnimal]=4227923967&a|u+1<<16}(e,t):e.qp_atomicType===U.Drop?function(e,t){var n=B(e.qp_activePlayer),r=1<<e.dropped;t[n]&=~r,t[(e.destination<<1)+e.qp_activePlayer]|=r;var i=t[j.SnipeSetsTurnNumberAndMovedAnimal],a=i>>>16&o.LeastTenBits;t[j.SnipeSetsTurnNumberAndMovedAnimal]=4227923967&i|a+1<<16}(e,t):function(e,t){var n=e.qp_startIndex,r=1<<e.moved;t[n]&=~r;var i=e.destination<<1;if(e.qp_doesStepActivateTriplet){t[B(e.qp_activePlayer)]|=t[i]|t[1|i],t[i|e.qp_activePlayer]=r,t[i|e.qp_inactivePlayer]=0;var a=t[j.SnipeSetsTurnNumberAndMovedAnimal],u=a>>>i&o.LeastTwoBits;t[j.SnipeSetsTurnNumberAndMovedAnimal]=a&~(3<<i)|u<<(e.qp_activePlayer?14:0)}else t[i|e.qp_activePlayer]|=r;var s=t[j.SnipeSetsTurnNumberAndMovedAnimal];t[j.SnipeSetsTurnNumberAndMovedAnimal]=s>>>31?67108863&s|e.moved<<26:4227923967&(67108863&s|2147483648)|1+(s>>>16&o.LeastTenBits)<<16}(e,t)}function w(e,t){var n=e[t+j.SnipeSetsTurnNumberAndMovedAnimal];return 2&n?y.Alpha:n>>>14&1?y.Beta:function(e){var t=e[j.SnipeSetsTurnNumberAndMovedAnimal];if(2&t|t>>>14&1)return!1;var n=t>>>16&1,r=1^n,i=_[n];if(32===d(e)){v(t,n)&&console.log("etc",t);var a=h(t,n);if(D(a)){var u=t>>>(a<<1)&1<<r,s=e[a<<1|n]|e[a<<1|r];if(u|s){if(D(q(a,n)))return!0;if(D(O(a,n)))return!0}}var p=A(n,e);if(m(p)>1)for(var l=0;l<=31;l++)if(1<<l&p)for(var c=(N(l)?i:S).length,f=0;f<c;f++)return!0}for(var y=1;y<=6;y++){var B=e[y<<1|n];if(0!==B)for(var g=B|e[(y<<1)+r],b=t>>>(y<<1)&o.LeastTwoBits||m(g)>1,w=t>>>26,T=q(y,n),E=0!==T&&7!==T,F=!E<<1,C=t>>>(T<<1),M=(C&1<<n)>>>F,L=(C&1<<r)>>>F,x=O(y,n),k=0!==x&&7!==x,W=!k<<1,P=t>>>(x<<1),I=(P&1<<n)>>>W,U=(P&1<<r)>>>W,V=0;V<=31;V++)if(w!==V&&1<<V&B){var z=R(T,V,e),H=N(V),G=H&&R(x,V,e);if(b){if(E&&(!M||L||!z))return!0;if(H&&k&&(!I||U||!G))return!0}else{if(E&&L&&z)return!0;if(G&&k&&U)return!0}}}return!1}(e.subarray(t,t+17))?-1:1&~(n>>>16)}function T(e){var n=t[e+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&o.LeastTenBits;return 1022===n?y.Alpha:1023===n?y.Beta:-1}function E(e){if(r>t.length-e)throw new Error("Monte Carlo Tree heap has ran out of space.");var n=r;return r+=e,n}function F(e,n,r){t.set(t.subarray(e,e+17),r),t[r+j.ParentIndex]=e,t[r+j.Atomic]=function(e){return e.qp_atomicType===U.SnipeStep?e.destination<<3|1:e.qp_atomicType===U.Drop?e.destination<<8|e.dropped<<3|2:e.destination<<8|e.moved<<3|3}(n),t[r+j.Value]=0,t[r+j.Rollouts]=0,t[r+j.ChildListStartIndex]=-1,b(n,t.subarray(r,r+17))}function C(e){var t=e&o.LeastThreeBits;return 1===t?{plyType:g.SnipeStep,destination:e>>>3}:2===t?{plyType:g.Drop,dropped:e>>>3&o.LeastFiveBits,destination:e>>>8}:{moved:e>>>3&o.LeastFiveBits,destination:e>>>8}}function x(e,n){var r=s(e);return 0===r?1/0:function(e){return t[e+j.Value]}(e)/r+V*Math.sqrt(Math.log(n)/r)}function k(e,n){for(var r=e,o=t[r+j.ParentIndex];~o;)t[r+j.Value]+=n===W(o),t[r+j.Rollouts]+=1,o=t[(r=o)+j.ParentIndex];t[r+j.Value]+=n===W(r),t[r+j.Rollouts]+=1}function W(e){return t[e+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&1}function P(e,n){for(var r=(1022|n)<<16,o=e,i=I(o);~i&&(t[i+j.SnipeSetsTurnNumberAndMovedAnimal]>>>16&1)===n;){var a=o+j.SnipeSetsTurnNumberAndMovedAnimal,u=t[a];t[a]=4227923967&u|r,i=I(o=i)}var s=o+j.SnipeSetsTurnNumberAndMovedAnimal,p=t[s];t[s]=4227923967&p|r}function I(e){return t[e+j.ParentIndex]}function z(){return 0}function H(e){var n=e;return{pointer:e,atomic:-1===t[n+j.ParentIndex]?u.option.none():u.option.some(C(t[n+j.Atomic])),value:t[n+j.Value],rollouts:t[n+j.Rollouts]}}}!function(e){e[e.SnipeSetsTurnNumberAndMovedAnimal=16]="SnipeSetsTurnNumberAndMovedAnimal",e[e.ParentIndex=17]="ParentIndex",e[e.Atomic=18]="Atomic",e[e.Value=19]="Value",e[e.Rollouts=20]="Rollouts",e[e.ChildListStartIndex=21]="ChildListStartIndex"}(j||(j={})),function(e){e[e.SnipeStep=0]="SnipeStep",e[e.Drop=1]="Drop",e[e.AnimalStep=2]="AnimalStep"}(U||(U={}));var G=u.option.none(),Y=0,J=u.option.none();self.addEventListener("message",(function(e){var t=e.data;if("object"===typeof t&&null!==t){var n=t;switch(n.messageType){case E.UpdateGameStateRequest:!function(e){var t=e.gameState;G=z(t,t.plies.length+3,44e7),function(e){J=Number.isFinite(e)?u.option.some(Date.now()+e):u.option.none();var t={messageType:E.StopTimeChangeNotification,optStopTime:J.unwrapOr(null)};self.postMessage(t)}(e.thinkingTimeInMS)}(n);break;case E.PauseAnalyzerRequest:G.ifSome((function(e){var t=e.getInternalData();G=u.option.none();var n={messageType:E.PauseAnalyzerResponse,internalData:t};self.postMessage(n,[t.heapBuffer])}));break;case E.ResumeAnalyzerRequest:!function(e){G=u.option.some(H(e.internalData))}(n);break;default:}}})),function e(){G.match({none:function(){var e={messageType:E.UpdateSnapshotNotification,optSnapshot:null};self.postMessage(e)},some:function(e){var t=e.getNodeSummary(e.getRootPointer()),n=t.value/t.rollouts,r=t.rollouts>=1e6&&(n>.999||n<.001),o=J.someSatisfies((function(e){return Date.now()>e}));if(!r&&!o)for(var i=0;i<5e3;i++)e.performRollout();var a=Date.now();a>Y+200&&(!function(e){var t={messageType:E.UpdateSnapshotNotification,optSnapshot:e.getSnapshot()};self.postMessage(t)}(e),Y=a)}}),requestAnimationFrame(e)}()}]);
//# sourceMappingURL=288d488608b0ccd2c35d.worker.js.map